# @Configuration 과 바이트코드 조작의 마법
스프링 컨테이너는 싱글톤 레지스트리이다. 따라서 스프링 빈이 싱글톤이 되도록 보장해주어야한다. 따라서 스프링은 클래스의 바이트코드를 조작하는 라이브러리를 사용한다.
@Configuration 을 적용한 클래스에 한해서 된다.

AppConfig 스프링 빈을 조회하면 CGLIB 라는 것이 붙으면서 복잡하게 나온다. 이게 내가 만든 클래스가 아니라 스프링이 CGLIB 라는 바이트코드 조작 라이브러리를
사용해서 AppConfig 클래스를 상속받은 임의의 다른 콜래스를 만들고 그 클래스를 스프링 빈으로 등록한 것이다!
따라서 스프링 컨테이너 안에 AppConfig@CGLIB 라는 임의의 클래스가 빈으로 등록되어있을것이고, 이게 싱글톤이 보장되도록 해주는 것이다.
만약 @Bean 이 붙은 메서드마다 스프링 빈이 존재하면 그 빈을 반환하고, 없으면 생성해서 등록하는 코드가 동적으로 만들어진다. -> 이것으로 싱글톤이 보장되는 것!!

## 만약 @Configuration 이 아닌 @Bean 을 붙여놓는다면?
- AppConfig 에 @Bean 을 붙여놓으면 CGLIB 기술 없이 순수하게 스프링 빈에 등록되는 것이므로, MemberRepository 가 3번 호출되게 될 것이다.
- 따라서 각각 다른 인스턴스를 생성하게될 것이고, 싱글톤을 보장하지 못하게 된다.

## 정리
1. @Bean 만 사용해도 스프링 빈으로 등록되지만, 싱글톤을 보장하지 않는다.
2. 스프링 설정 정보는 @Configuration 을 사용하자!